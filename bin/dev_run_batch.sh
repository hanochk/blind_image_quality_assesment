#!/bin/bash
echo "start runbatc.sh" >> ./gated_atten_new_bb_concencus-replace-val-with-test_MLP.py.log
python -u quality_bin_cls_cnn.py mobilenet_v2_256_win_n_lyrs --tensorboard-log-dir /hdd/hanoch/runmodels/img_quality/results --database-root /hdd/hanoch/data/lice-data-bbox-8191106-simple-sharded-part/tile_data --dataset-split-csv /hdd/hanoch/data/lice-data-bbox-8191106-simple-sharded-part/tile_data/train_test_val_quality_merged_tile_tile.csv --result-dir /hdd/hanoch/runmodels/img_quality/results --batch-size 64 --epochs 24 --gpu-id 1  > ./scriptRerun.py.log </dev/null 2>&1

python -u ./dev/quality_bin_cls_cnn.py mobilenet_v2_2FC_w256_nlyrs --tensorboard-log-dir /hdd/hanoch/runmodels/img_quality/results/mobilenet_v2_256_win_n_lyrs/canny_edges_sum_50_70 --database-root /hdd/hanoch/data/lice-data-bbox-20191106-simple-sharded-part/tile_data --dataset-split-csv /hdd/hanoch/data/lice-data-bbox-20191106-simple-sharded-part/tile_data/file_quality_tile_eileen_good_bad_val_bad_9_20_avg_pool_filt_conf_filt_no_edges_trn_tst_fitjar_ntiles.csv --result-dir /hdd/hanoch/runmodels/img_quality/results/mobilenet_v2_256_win_n_lyrs/canny_edges_sum_50_70 --nlayers-finetune 22 --hsv-hue-jitter 0.1 --hsv-sat-jitter 0.2 --gradient-clip-value 5 --batch-size 32 --epochs 20 --lr 0.0001 --lr-decay-base 0.7 --dropout 0.2 --balancing-sampling  --handcrafted-features n_tiles --gpu-id 3
python -u ./dev/quality_bin_cls_cnn.py mobilenet_v2_2FC_w256_fusion_3cls --tensorboard-log-dir /hdd/hanoch/runmodels/img_quality/results/mobilenet_v2_256_win_n_lyrs/gated_atten_new_bb_concencus-replace-val-with-test_MLP --database-root /hdd/hanoch/data/database/blind_quality/quality_based_all_annotations_24_6/png/tiles --dataset-split-csv /hdd/hanoch/data/lice-data-bbox-20191106-simple-sharded-part/tile_data/stratified_train_val_test_test_set_penn_dependant_label_concensus_data_list_new_7818.csv --result-dir /hdd/hanoch/runmodels/img_quality/results/mobilenet_v2_256_win_n_lyrs/gated_atten_new_bb_concencus-replace-val-with-test_MLP --pretrained-weights-path /hdd/hanoch/runmodels/img_quality/results/mobilenet_v2_256_win_n_lyrs/new_db_7818_bin_class_penn_regularization/saved_state_mobilenet_v2_256_win_n_lyrs___1625844658 --fine-tune-pretrained-model-plan freeze_pretrained_add_gated_atten --classify-image-all-tiles --gpu-id 1 --nlayers-finetune 3 --hsv-hue-jitter 0.1 --hsv-sat-jitter 0.2 --gradient-clip-value 5 --balancing-sampling --lr 0.005 --epochs 30 --batch-size 32 --dropout 0.2 --weight-decay 0.001 --lr-decay-policy warmup_linear_over_cosine_anneal --lr-decay-hyperparam 200 >> ./gated_atten_new_bb_concencus-replace-val-with-test_MLP.py.log </dev/null 2>&1
